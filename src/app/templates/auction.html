

<div class="row">

    <div class="col-md-2">
        <div class="row">
            <bidder-form (onAddBidder) = "onAddBidder($event)"></bidder-form>
        </div>
        <div class="row">
            <offer-form (onAddItem) = "onAddItem($event)"></offer-form>
        </div>
    </div>
    <div class="col-md-10">
        <label>Auction</label>
        <div class="table-container">
            <div >
                <label>Currencies:</label>
                <label class="currency-check-label">CP<input class="currency-check" type="checkbox" [(ngModel)]="cpChecked"/></label>
                <label class="currency-check-label">SP<input class="currency-check" type="checkbox" [(ngModel)]="spChecked"/></label>
                <label class="currency-check-label">EP<input class="currency-check" type="checkbox" [(ngModel)]="epChecked"/></label>
                <label class="currency-check-label">GP<input class="currency-check" type="checkbox" [(ngModel)]="gpChecked"/></label>
                <label class="currency-check-label">PP<input class="currency-check" type="checkbox" [(ngModel)]="ppChecked"/></label>
            </div>
            <table *ngIf="bidders.length > 0 || offers.length > 0" class="table table-hover table-bordered">
                <tr>
                    <td class="first-table-row-td" width="10%">
                        Name
                    </td>
                    <td class="first-table-row-td" width="10%">
                        Budget
                    </td>
                    <td class="first-table-row-td" width="10%" *ngFor="let offer of offers; let i = index">
                        {{i + 1}}. {{offer.name}}
                    </td>
                    <td class="first-table-row-td">
                    </td>
                </tr>
                <tr>
                    <td width="10%">

                    </td>
                    <td width="10%">

                    </td>
                    <td *ngFor="let offer of offers; let i = index">
                        <label class="currency-check-label">Start Price<input class="currency-check" type="checkbox" [(ngModel)]="offers[i].hasStartPrize"/></label>
                        <div *ngIf="offers[i].hasStartPrize">
                            <div *ngIf="cpChecked"><label class="label-input">CP</label><input class="form-control currency-input" type="number" name="cp" min=0 [(ngModel)]="offers[i].startPrice.cp"></div>
                            <div *ngIf="spChecked"><label class="label-input">SP</label><input class="form-control currency-input" type="number" name="sp" min=0 [(ngModel)]="offers[i].startPrice.sp"></div>
                            <div *ngIf="epChecked"><label class="label-input">EP</label><input class="form-control currency-input" type="number" name="ep" min=0 [(ngModel)]="offers[i].startPrice.ep"></div>
                            <div *ngIf="gpChecked"><label class="label-input">GP</label><input class="form-control currency-input" type="number" name="gp" min=0 [(ngModel)]="offers[i].startPrice.gp"></div>
                            <div *ngIf="ppChecked"><label class="label-input">PP</label><input class="form-control currency-input" type="number" name="pp" min=0 [(ngModel)]="offers[i].startPrice.pp"></div>
                        </div>
                        <label class="currency-check-label">Minimum Raise<input class="currency-check" type="checkbox" [(ngModel)]="offers[i].hasMinimumRaise"/></label>
                        <div *ngIf="offers[i].hasMinimumRaise">
                            <div *ngIf="cpChecked"><label class="label-input">CP</label><input class="form-control currency-input" type="number" name="cp" min=0 [(ngModel)]="offers[i].minimumRaise.cp"></div>
                            <div *ngIf="spChecked"><label class="label-input">SP</label><input class="form-control currency-input" type="number" name="sp" min=0 [(ngModel)]="offers[i].minimumRaise.sp"></div>
                            <div *ngIf="epChecked"><label class="label-input">EP</label><input class="form-control currency-input" type="number" name="ep" min=0 [(ngModel)]="offers[i].minimumRaise.ep"></div>
                            <div *ngIf="gpChecked"><label class="label-input">GP</label><input class="form-control currency-input" type="number" name="gp" min=0 [(ngModel)]="offers[i].minimumRaise.gp"></div>
                            <div *ngIf="ppChecked"><label class="label-input">PP</label><input class="form-control currency-input" type="number" name="pp" min=0 [(ngModel)]="offers[i].minimumRaise.pp"></div>
                        </div>
                    </td>
                </tr>
                <tr *ngFor="let bidder of bidders; let b = index">
                    <td>{{bidder.name}}</td>

                    <td>
                        <div *ngIf="cpChecked"><label class="label-input">CP</label><input class="form-control currency-input" type="number" name="cp" pattern="[1-9][0-9]*" [(ngModel)]="bidder.budget.cp"></div>
                        <div *ngIf="spChecked"><label class="label-input">SP</label><input class="form-control currency-input" type="number" name="sp" min=0 [(ngModel)]="bidder.budget.sp"></div>
                        <div *ngIf="epChecked"><label class="label-input">EP</label><input class="form-control currency-input" type="number" name="ep" min=0 [(ngModel)]="bidder.budget.ep"></div>
                        <div *ngIf="gpChecked"><label class="label-input">GP</label><input class="form-control currency-input" type="number" name="gp" min=0 [(ngModel)]="bidder.budget.gp"></div>
                        <div *ngIf="ppChecked"><label class="label-input">PP</label><input class="form-control currency-input" type="number" name="pp" min=0 [(ngModel)]="bidder.budget.pp"></div>
                    </td>

                    <td *ngFor="let offer of offers; let i = index">
                        <label class="currency-check-label">Whole Budget<input class="currency-check" type="checkbox" [(ngModel)]="bidder.bidstates[i].useWholeBudget"/></label>
                        <div *ngIf="!bidder.bidstates[i].useWholeBudget">
                            <div *ngIf="cpChecked"><label class="label-input">CP</label><input class="form-control currency-input" type="number" name="cp" min=0 [(ngModel)]="bidder.bidstates[i].max.cp"></div>
                            <div *ngIf="spChecked"><label class="label-input">SP</label><input class="form-control currency-input" type="number" name="sp" min=0 [(ngModel)]="bidder.bidstates[i].max.sp"></div>
                            <div *ngIf="epChecked"><label class="label-input">EP</label><input class="form-control currency-input" type="number" name="ep" min=0 [(ngModel)]="bidder.bidstates[i].max.ep"></div>
                            <div *ngIf="gpChecked"><label class="label-input">GP</label><input class="form-control currency-input" type="number" name="gp" min=0 [(ngModel)]="bidder.bidstates[i].max.gp"></div>
                            <div *ngIf="ppChecked"><label class="label-input">PP</label><input class="form-control currency-input" type="number" name="pp" min=0 [(ngModel)]="bidder.bidstates[i].max.pp"></div>
                        </div>
                        <div>
                            Current Bid <label>{{this.bidders[b].bidstates[i].current}}</label>
                        </div>
                        <div>
                            <label>{{this.bidders[b].bidstates[i].fails}}</label>
                        </div>
                    </td>
                </tr>
                <tr>
                    <td width="10%">
                        Players
                    </td>
                    <td width="10%">
                        'Their current balance'
                    </td>
                    <td *ngFor="let offer of offers; let i = index">
                        Player's bid
                        <div *ngIf="cpChecked"><label class="label-input">CP</label><input class="form-control currency-input" type="number" name="cp" min=0 [(ngModel)]="players.bidstates[i].current.cp"></div>
                        <div *ngIf="spChecked"><label class="label-input">SP</label><input class="form-control currency-input" type="number" name="sp" min=0 [(ngModel)]="players.bidstates[i].current.sp"></div>
                        <div *ngIf="epChecked"><label class="label-input">EP</label><input class="form-control currency-input" type="number" name="ep" min=0 [(ngModel)]="players.bidstates[i].current.ep"></div>
                        <div *ngIf="gpChecked"><label class="label-input">GP</label><input class="form-control currency-input" type="number" name="gp" min=0 [(ngModel)]="players.bidstates[i].current.gp"></div>
                        <div *ngIf="ppChecked"><label class="label-input">PP</label><input class="form-control currency-input" type="number" name="pp" min=0 [(ngModel)]="players.bidstates[i].current.pp"></div>
                    </td>
                </tr>
                <tr>
                    <td width="10%">

                    </td>
                    <td width="10%">

                    </td>
                    <td *ngFor="let offer of offers; let i = index">
                        <div *ngIf="this.offers[i].highestBidder != undefined">Highest Bidder <label>{{this.offers[i].highestBidder.name}}</label></div>
                        <div *ngIf="this.offers[i].highestBidder != undefined">Highest Bid <label>{{this.offers[i].currentPrice}}</label></div>

                        <button class="btn btn-primary" (click)="knockGavel(i)"><i class="fa fa-legal"></i></button>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
